Title: 从源代码安装软件
Date: 2007-01-23 22:11
Author: toy
Category: Tutorials
Slug: install-software-from-sources

在什么情况之下，我们需要从源代码安装软件呢？我想不外乎这些情形：一种情况是软件放出了新的版本，而所用的发行版并没有及时跟进，这时候，想要尝鲜的话，就非得靠自己不可；另一种情形是不管是软件的开发者，还是现用的系统都没有提供可直接使用的二进制包，而自己又非要使用该软件，那么也需亲自出马才行；当然，还有其他的情形。总而言之，学会从源代码安装软件是一项非常重要的技能。

那么，要如何才能从源代码安装软件呢？首先，你必须要做好为编译源代码所需的准备工作。这包括两个方面：

1.  编译工具：要将源代码编译成可执行的二进制文件，编译工具必不可少。在
    Ubuntu 中，可以从终端中执行 `sudo apt-get install build-essential`
    指令来安装基本的编译工具。根据所编译程序的实际情况，你也可能需要安装其他一些工具。
2.  编译依赖：除了安装基本的编译工具之外，为了顺利编译源代码，我们也要把该程序所需要的依赖安装好。Ubuntu
    系统可以通过 `sudo apt-get build-dep`
    命令后跟包名的方式来准备所需的依赖。如果在 Ubuntu
    中无法通过这样的办法来安装依赖的话，那么应该善于阅读源码包中所含的
    README、INSTALL 等文件，一般程序作者都有说明，只需按要求做即可。

在编译源代码之前，你一定把软件的源码包下载到了自己的硬盘上吧。一般而言，程序源码包经常被打包成
.tar.gz 和 .tar.bz2 这两种格式。前者可用 `tar zxvf *.tar.gz`
来解包，后者则用
`tar jxvf *.tar.bz2`。通常，在解包后，我们应该阅读程序附带的相关说明文件，如
README（自述文件）、INSTALL（安装文件）等，以便了解程序的编译介绍。

当所有的事情都准备妥当了后，那么让我们来进行源代码编译的三部曲吧。

1.  配置：这是编译源代码的第一步，通过 `./configure`
    命令完成。执行此步以便为编译源代码作准备。常用的选项有
    `--`prefix=PREFIX，用以指定程序的安装位置。更多的选项可通过 `--`help
    查询。也有某些程序无需执行此步。
2.  编译：一旦配置通过，可即刻使用 `make`
    指令来执行源代码的编译过程。视软件的具体情况而定，编译所需的时间也各有差异，我们所要做的就是耐心等候和静观其变。此步虽然仅下简单的指令，但有时候所遇到的问题却十分复杂。较常碰到的情形是程序编译到中途却无法圆满结束。此时，需要根据出错提示分析以便找到应对之策。
3.  安装：如果编译没有问题，那么执行 `sudo make install`
    就可以将程序安装到系统中了。

若是觉得所编译的软件不够适用想要删除，又如何做呢？我们只需转到编译源代码的目录，执行
`sudo make uninstall` 命令。
